<template>
  <div class="home">
    <div class="row mx-1 justify-content-center">
      <ul class="col-lg-6 col-xl-6 col-sm-12 col-md-12">
        <li v-for="comment in comments" v-if="!comment.pid" class="media commentBlock border row mb-2">
          <img class="p-1 avatar" :src="comment.owner.avatar.src" alt="">
          <div class="col-10 media-body">
            <div class="row pl-3">
              <div class="row col-11 px-0  align-items-baseline">
                <span class="font-weight-bold px-0 col-12">{{comment.owner.firstname+' '+comment.owner.lastname}}</span>
                <span class="font-weight-light px-0" style="color: grey;font-size: 0.8em">{{ convertedDate(comment.created) }}</span>
              </div>
              <button @click="removeComment(comment.uuid)" class="btn col-1"><i class="fa fa-close"></i></button>
            </div>

            <div class="row">
              <p style="font-size: 0.8em">{{comment.body.text}}</p>
            </div>

            <!-- 2 уровень -->
            <div class="media row" v-for="comment_step_2 in comments" v-if="comment_step_2.step == 1 && comment_step_2.pid == comment.uuid ">
              <img class="p-1 avatar" :src="comment_step_2.owner.avatar.src" alt="">
              <div class="col-10 media-body">

                <div class="row pl-3">
                  <div class="row col-11 px-0 align-items-baseline">
                    <span class="font-weight-bold px-0 col-12">{{comment_step_2.owner.firstname+' '+comment_step_2.owner.lastname}}</span>
                    <span class="font-weight-light px-0" style="color: grey;font-size: 0.8em">{{ convertedDate(comment_step_2.created) }}</span>
                  </div>
                  <button  @click="removeComment(comment_step_2.uuid)" class="btn col-1"><i class="fa fa-close"></i></button>
                </div>

                <div class="row">
                  <p style="font-size: 0.8em">{{comment_step_2.body.text}}</p>
                </div>
                <!-- 3 уровень-->
                <div class="media row" v-for="comment_step_3 in comments" v-if="comment_step_3.step == 2 && comment_step_3.pid == comment_step_2.uuid ">
                  <img class="p-1 avatar" :src="comment_step_3.owner.avatar.src" alt="">
                  <div class="col-10 media-body">

                    <div class="row pl-3">
                      <div class="row col-11 px-0 align-items-baseline">
                        <span class="font-weight-bold px-0 col-12">{{comment_step_3.owner.firstname+' '+comment_step_3.owner.lastname}}</span>
                        <span class="font-weight-light px-0" style="color: grey;font-size: 0.8em">{{ convertedDate(comment_step_3.created) }}</span>
                      </div>
                      <div>
                        <button @click="removeComment(comment_step_3.uuid)" class="btn"><i class="fa fa-close"></i></button>
                      </div>
                    </div>

                    <div class="row">
                      <p style="font-size: 0.8em">{{comment_step_3.body.text}}</p>
                    </div>
                    <!-- 4 уровень -->
                    <div class="media row" v-for="comment_step_4 in comments" v-if="comment_step_4.step >= 3 && comment_step_4.pid === comment_step_3.uuid || comment_step_4.step >= 3 && oversize(comment_step_4.uuid)">
                      <img class="p-1 avatar" :src="comment_step_4.owner.avatar.src" alt="">
                      <div class="col-10 media-body">
                        <div class="row pl-3">

                          <div class="row col-11 px-0 align-items-baseline">
                            <span class="font-weight-bold px-0 col-12">{{comment_step_4.owner.firstname+' '+comment_step_4.owner.lastname}}</span>
                            <span class="font-weight-light px-0" style="color: grey;font-size: 0.8em">{{ convertedDate(comment_step_4.created) }}</span>
                          </div>
                          <div>
                            <button @click="removeComment(comment_step_4.uuid)" class="btn"><i class="fa fa-close"></i></button>
                          </div>
                        </div>

                        <div class="row">
                          <p style="font-size: 0.8em">{{comment_step_4.body.text}}</p>
                        </div>
                      </div>
                    </div>
                    <!-- 4 уровень-->
                  </div>
                </div>
                <!-- 3 уровень-->
              </div>
            </div>
            <!-- 2 уровень -->
          </div>
        </li>
      </ul>
    </div>

  </div>
</template>

<script>
let responseData = JSON.parse("{\n    \"message\": \"OK\",\n    \"data\": {\n        \"reviews\": {\n            \"a4515e5d-53b2-4072-acba-c5cf284dd119\": {\n                \"uuid\": \"a4515e5d-53b2-4072-acba-c5cf284dd119\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600422939\",\n                \"changed\": \"1600422939\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"00\"\n            },\n            \"084afe05-faa2-4746-85bb-214b43ea5543\": {\n                \"uuid\": \"084afe05-faa2-4746-85bb-214b43ea5543\",\n                \"pid\": \"a4515e5d-53b2-4072-acba-c5cf284dd119\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600422987\",\n                \"changed\": \"1600422988\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 1,\n                \"thread\": \"00\"\n            },\n            \"69d52571-17e9-4388-a2e0-9e4272e44a6e\": {\n                \"uuid\": \"69d52571-17e9-4388-a2e0-9e4272e44a6e\",\n                \"pid\": \"084afe05-faa2-4746-85bb-214b43ea5543\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600425481\",\n                \"changed\": \"1600425481\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 2,\n                \"thread\": \"00\"\n            },\n            \"f6d5bebb-6ac1-4ae0-b3c2-96d4d8b4c448\": {\n                \"uuid\": \"f6d5bebb-6ac1-4ae0-b3c2-96d4d8b4c448\",\n                \"pid\": \"69d52571-17e9-4388-a2e0-9e4272e44a6e\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600425819\",\n                \"changed\": \"1600425819\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 3,\n                \"thread\": \"00\"\n            },\n            \"24e914cf-83e1-431e-83d4-4cd28db66d83\": {\n                \"uuid\": \"24e914cf-83e1-431e-83d4-4cd28db66d83\",\n                \"pid\": \"f6d5bebb-6ac1-4ae0-b3c2-96d4d8b4c448\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600431946\",\n                \"changed\": \"1600431946\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 4,\n                \"thread\": \"00\"\n            },\n            \"476ebf39-bfbe-474b-a601-a87014a7b69e\": {\n                \"uuid\": \"476ebf39-bfbe-474b-a601-a87014a7b69e\",\n                \"pid\": \"24e914cf-83e1-431e-83d4-4cd28db66d83\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600432691\",\n                \"changed\": \"1600432692\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 5,\n                \"thread\": \"00\"\n            },\n            \"370cfb5a-0835-4732-8558-38d54dc1491c\": {\n                \"uuid\": \"370cfb5a-0835-4732-8558-38d54dc1491c\",\n                \"pid\": \"476ebf39-bfbe-474b-a601-a87014a7b69e\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600432695\",\n                \"changed\": \"1600432695\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 6,\n                \"thread\": \"00\"\n            },\n            \"37374ca2-4c0c-4852-a966-0b6103045151\": {\n                \"uuid\": \"37374ca2-4c0c-4852-a966-0b6103045151\",\n                \"pid\": \"370cfb5a-0835-4732-8558-38d54dc1491c\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600689862\",\n                \"changed\": \"1600689862\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 7,\n                \"thread\": \"00\"\n            },\n            \"9c8b0d9b-bcab-4366-9b2a-33cba190b01d\": {\n                \"uuid\": \"9c8b0d9b-bcab-4366-9b2a-33cba190b01d\",\n                \"pid\": \"37374ca2-4c0c-4852-a966-0b6103045151\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": {\n                    \"a69cd2e9-a743-4034-a48a-754131b39e9b\": {\n                        \"thumbnail\": {\n                            \"links\": {\n                                \"fallback\": \"https:\/\/via.placeholder.com\/300\/FFFF00\/000000\"\n                            }\n                        }\n                    },\n                    \"028dd650-6d00-4ff8-8231-986e92edaf2d\": {\n                        \"thumbnail\": {\n                            \"links\": {\n                                \"fallback\": \"https:\/\/via.placeholder.com\/300\/FF4F00\/004040\"\n                            }\n                        }\n                    },\n                    \"3c7b4a8d-5224-4a74-9cdc-39e86a35adbd\": {\n                        \"thumbnail\": {\n                            \"links\": {\n                                \"fallback\": \"https:\/\/via.placeholder.com\/300\/454F06\/004040\"\n                            }\n                        }\n                    }\n                },\n                \"video\": [],\n                \"created\": \"1600752289\",\n                \"changed\": \"1600752289\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 8,\n                \"thread\": \"00\"\n            },\n            \"e3b9ff9e-476b-4e70-bf1c-84245219e46f\": {\n                \"uuid\": \"e3b9ff9e-476b-4e70-bf1c-84245219e46f\",\n                \"pid\": \"a4515e5d-53b2-4072-acba-c5cf284dd119\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600752261\",\n                \"changed\": \"1600752261\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 1,\n                \"thread\": \"01\"\n            },\n            \"dd81ddcf-c019-43e6-b525-32eaa3810be5\": {\n                \"uuid\": \"dd81ddcf-c019-43e6-b525-32eaa3810be5\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600432704\",\n                \"changed\": \"1600432704\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"01\"\n            },\n            \"19bc07c4-1f17-4c24-98ec-077b577dd60e\": {\n                \"uuid\": \"19bc07c4-1f17-4c24-98ec-077b577dd60e\",\n                \"pid\": \"dd81ddcf-c019-43e6-b525-32eaa3810be5\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600691904\",\n                \"changed\": \"1600691904\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 1,\n                \"thread\": \"00\"\n            },\n            \"8e8665ad-2aa0-4df1-b6f2-8f611e36f1b0\": {\n                \"uuid\": \"8e8665ad-2aa0-4df1-b6f2-8f611e36f1b0\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600449226\",\n                \"changed\": \"1600449227\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"02\"\n            },\n            \"e3887c82-84cb-45a0-8957-0da99414b9fb\": {\n                \"uuid\": \"e3887c82-84cb-45a0-8957-0da99414b9fb\",\n                \"pid\": \"8e8665ad-2aa0-4df1-b6f2-8f611e36f1b0\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600691901\",\n                \"changed\": \"1600691901\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 1,\n                \"thread\": \"00\"\n            },\n            \"ab718537-95ea-4639-a184-decd332b4fef\": {\n                \"uuid\": \"ab718537-95ea-4639-a184-decd332b4fef\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600691896\",\n                \"changed\": \"1600691896\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"03\"\n            },\n            \"ca20a6e6-9e27-408f-87b1-1663f6fdf52a\": {\n                \"uuid\": \"ca20a6e6-9e27-408f-87b1-1663f6fdf52a\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1600764772\",\n                \"changed\": \"1600764772\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"7a1b0527-a812-42e5-a1b3-aad6160f8ea5\",\n                    \"login\": \"zajet1\",\n                    \"firstname\": \"\u0418\u0432\u0430\u043d\",\n                    \"lastname\": \"\u0418\u0432\u0430\u043d\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/0000FF\/808080\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"04\"\n            },\n            \"93b7c082-b625-4109-a405-fe2ec6477056\": {\n                \"uuid\": \"93b7c082-b625-4109-a405-fe2ec6477056\",\n                \"pid\": null,\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0422\u0435\u0441\u0442 \u0432\u0430\u0432\u044b \u0430\u0432\u044b\u0430\u044b\u0432\u0430\u044b\u0432\u0430\u044b\u0432\u0430\u044b\u0432\u0430 \u0432\u0430\u044b\u0430\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1602003038\",\n                \"changed\": \"1602003038\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"1d11fb81-1282-4835-889b-16151be0ce94\",\n                    \"login\": \"Sky_Cat\",\n                    \"firstname\": \"\u041f\u0435\u0442\u0440\",\n                    \"lastname\": \"\u041f\u0435\u0442\u0440\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/FFFF00\/000000\"\n                    }\n                },\n                \"step\": 0,\n                \"thread\": \"05\"\n            },\n            \"ad34400a-79da-447d-80be-3b3669219b53\": {\n                \"uuid\": \"ad34400a-79da-447d-80be-3b3669219b53\",\n                \"pid\": \"93b7c082-b625-4109-a405-fe2ec6477056\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0430\u0432\u0430\u0432\u044b\u0430\u0432\u044b\u0430\u0432\u044b\u0430\u044b\u0432\u0430sf\u044b\u0432\u0430\u0432\u044b \u0430\u0432\u044b\u0430\u0432\u044b\u0430 \u0432\u044b\u0430\u044b\u0432\u0430\u044b\u0430\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1602003055\",\n                \"changed\": \"1602003055\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"1d11fb81-1282-4835-889b-16151be0ce94\",\n                    \"login\": \"Sky_Cat\",\n                    \"firstname\": \"\u041f\u0435\u0442\u0440\",\n                    \"lastname\": \"\u041f\u0435\u0442\u0440\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/FFFF00\/000000\"\n                    }\n                },\n                \"step\": 1,\n                \"thread\": \"00\"\n            },\n            \"f33cab39-01e2-46ad-a86e-d8231bfcb799\": {\n                \"uuid\": \"f33cab39-01e2-46ad-a86e-d8231bfcb799\",\n                \"pid\": \"ad34400a-79da-447d-80be-3b3669219b53\",\n                \"review_type\": \"comment\",\n                \"star\": 0,\n                \"pros\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"cons\": {\n                    \"text\": \"\",\n                    \"format\": \"\"\n                },\n                \"body\": {\n                    \"text\": \"\u0430\u043f\u0430\u0432\u043f\u0430\u0432\u043f\u0430\u0432\u043f \u0430\u043f \u0432\u0430\u043f \u0430\u0432\u043f\u0430\u0432 \u043f\u0430\u0432 \u043f\u0432\u0430\",\n                    \"format\": \"plain_text\"\n                },\n                \"files\": [],\n                \"video\": [],\n                \"created\": \"1602003090\",\n                \"changed\": \"1602003090\",\n                \"status\": 1,\n                \"owner\": {\n                    \"uuid\": \"1d11fb81-1282-4835-889b-16151be0ce94\",\n                    \"login\": \"Sky_Cat\",\n                    \"firstname\": \"\u041f\u0435\u0442\u0440\",\n                    \"lastname\": \"\u041f\u0435\u0442\u0440\u043e\u0432\",\n                    \"avatar\": {\n                        \"src\": \"https:\/\/via.placeholder.com\/150\/FFFF00\/000000\"\n                    }\n                },\n                \"step\": 2,\n                \"thread\": \"00\"\n            }\n        }\n    },\n    \"status\": \"SUCCESS\"\n}");
import moment from 'moment'
moment.locale('ru')

export default {
  name: 'Home',
  data () {
    return {
      comments: {}
    }
  },
  mounted()  {
    this.comments = this.getComments();
    if(this.is_empty_array(this.comments)){
      this.setComments();
      this.comments = this.getComments();
    }
  },
  methods:{
    oversize(uuid){
      for (let key of Object.keys(this.comments)) {
        if (this.comments[key].pid === uuid){
          return true;
        }
      }
    },
    is_empty_array(arr) {
      return Object.keys(arr).length === 0 && arr.constructor === Object;
    },
    deleteTreeComments(commentId) {
        Object.keys(this.comments).forEach(key => {
          try {
          if (this.comments[key].pid === commentId) {
            try {
             this.deleteTreeComments(this.comments[key].uuid);
            }catch (e){
            }
            this.$delete(this.comments,key);
          }else if (this.comments[key].pid == null){
            return null;
          }
        }catch (e){

          }});
    },
    removeComment(commentId){
      this.deleteTreeComments(commentId)
      this.$delete(this.comments,commentId);
      localStorage.setItem('comments',JSON.stringify(this.comments));
    },
    convertedDate(currentDate){
      let currect = moment.unix(currentDate).format('DD MMMM H:mm');
      return currect
    },
    setComments(){
      localStorage.setItem('comments',JSON.stringify(responseData.data.reviews));
    },
    getComments(){
      let test = localStorage.getItem('comments');
      return JSON.parse(test);
    }
  }
}
</script>
<style scoped>
.commentBlock{
  background: rgba(128, 128, 128,.08);
}
.avatar {
  vertical-align: middle;
  width: 50px;
  height: 50px;
  border-radius: 25%;
}
</style>
